{"version":3,"sources":["main.js"],"names":["brush","document","getElementById","eraser","save","clear","canvas","ctx","getContext","eraserEnabled","painting","lastPoint","width","documentElement","clientWidth","height","clientHeight","isTouchDevice","ontouchstart","e","x","touches","clientX","y","clientY","clearRect","ontouchmove","drawLine","onmousedown","onmousemove","onmouseup","x1","y1","x2","y2","lineWidth","lineCap","beginPath","moveTo","lineTo","stroke","onclick","classList","add","remove","imgUrl","toDataURL","a","createElement","body","appendChild","href","download","Date","getTime","target","click","fillStyle","fillRect","events","selectColor","key","hasOwnProperty","querySelector","strokeStyle","colorList","parentNode","children","i","length"],"mappings":"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","file":"main.d61f456a.js","sourceRoot":"..\\src","sourcesContent":["let brush = document.getElementById(\"brush\");\r\nlet eraser = document.getElementById(\"eraser\");\r\nlet save = document.getElementById(\"save\");\r\nlet clear = document.getElementById(\"clear\");\r\nlet canvas = document.getElementById(\"canvas\");\r\nlet ctx = canvas.getContext(\"2d\");\r\nlet eraserEnabled = false;\r\nlet painting = false;\r\nlet lastPoint;\r\n\r\n//设置画布的宽高为屏幕的宽高\r\ncanvas.width = document.documentElement.clientWidth;\r\ncanvas.height = document.documentElement.clientHeight;\r\n\r\n//检测是否支持触屏\r\nvar isTouchDevice = \"ontouchstart\" in document.documentElement;\r\nif (isTouchDevice) {\r\n  canvas.ontouchstart = (e) => {\r\n    //获取第一个触碰点\r\n    let x = e.touches[0].clientX;\r\n    let y = e.touches[0].clientY;\r\n    if (eraserEnabled) {\r\n      ctx.clearRect(x - 15, y - 15, 30, 30);\r\n    }\r\n    lastPoint = [x, y];\r\n  };\r\n  canvas.ontouchmove = (e) => {\r\n    let x = e.touches[0].clientX;\r\n    let y = e.touches[0].clientY;\r\n    if (eraserEnabled) {\r\n      ctx.clearRect(x - 15, y - 15, 30, 30);\r\n    } else {\r\n      drawLine(lastPoint[0], lastPoint[1], x, y);\r\n    }\r\n    lastPoint = [x, y]; //更新上一次的坐标点\r\n  };\r\n} else {\r\n  canvas.onmousedown = (e) => {\r\n    painting = true;\r\n    let x = e.clientX;\r\n    let y = e.clientY;\r\n    if (eraserEnabled) {\r\n      ctx.clearRect(x - 15, y - 15, 30, 30);\r\n    }\r\n    lastPoint = [x, y]; //初始化lastPoint\r\n  };\r\n  canvas.onmousemove = (e) => {\r\n    let x = e.clientX;\r\n    let y = e.clientY;\r\n    if (painting) {\r\n      if (eraserEnabled) {\r\n        ctx.clearRect(x - 15, y - 15, 30, 30);\r\n      } else {\r\n        drawLine(lastPoint[0], lastPoint[1], x, y);\r\n      }\r\n      lastPoint = [x, y]; //更新上一次的坐标点\r\n    }\r\n  };\r\n  canvas.onmouseup = () => {\r\n    painting = false;\r\n  };\r\n}\r\n\r\n//画线函数\r\nfunction drawLine(x1, y1, x2, y2) {\r\n  ctx.lineWidth = 3;\r\n  ctx.lineCap = \"round\";\r\n  ctx.beginPath();\r\n  ctx.moveTo(x1, y1);\r\n  ctx.lineTo(x2, y2);\r\n  ctx.stroke();\r\n}\r\n\r\n//点击画笔\r\nbrush.onclick = function () {\r\n  eraserEnabled = false;\r\n  brush.classList.add(\"active\");\r\n  eraser.classList.remove(\"active\");\r\n};\r\n\r\n//点击橡皮擦\r\neraser.onclick = function () {\r\n  eraserEnabled = true;\r\n  eraser.classList.add(\"active\");\r\n  brush.classList.remove(\"active\");\r\n};\r\n\r\n//点击保存\r\nsave.onclick = function () {\r\n  let imgUrl = canvas.toDataURL(\"image/png\");\r\n  let a = document.createElement(\"a\");\r\n  document.body.appendChild(a);\r\n  a.href = imgUrl;\r\n  a.download = \"mypic\" + new Date().getTime();\r\n  a.target = \"_blank\";\r\n  a.click();\r\n};\r\n\r\n//点击清屏\r\nclear.onclick = function () {\r\n  ctx.fillStyle = \"#cdedba\";\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n};\r\n\r\n//选择画笔颜色\r\nconst events = {\r\n  \".black\": \"black\",\r\n  \".red\": \"red\",\r\n  \".yellow\": \"yellow\",\r\n  \".green\": \"green\",\r\n  \".blue\": \"blue\",\r\n};\r\nfunction selectColor() {\r\n  for (let key in events) {\r\n    if (events.hasOwnProperty(key)) {\r\n      document.querySelector(key).onclick = function () {\r\n        eraserEnabled = false;\r\n        ctx.strokeStyle = events[key];\r\n        brush.classList.add(\"active\");\r\n        eraser.classList.remove(\"active\");\r\n        let colorList = this.parentNode.children;\r\n        for (let i = 0; i < colorList.length; i++) {\r\n          colorList[i].classList.remove(\"selected\");\r\n        }\r\n        this.classList.add(\"selected\");\r\n      };\r\n    }\r\n  }\r\n}\r\nselectColor();\r\n"]}